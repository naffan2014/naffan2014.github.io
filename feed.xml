<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="http://naffan.cn/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.3.1">Jekyll</generator><link href="http://naffan.cn/feed.xml" rel="self" type="application/atom+xml" /><link href="http://naffan.cn/" rel="alternate" type="text/html" /><updated>2017-04-10T19:17:04+08:00</updated><id>http://naffan.cn//</id><title type="html">拿饭网</title><subtitle>拿饭网是一个私人博客系统，采用jekyll博客系统部署在GitHub-Pages服务上。拿饭网内的文章均出自作者，作者以技术为导向同时兼顾自己的生活与对经济的观点。</subtitle><author><name>张一帆</name></author><entry><title type="html">如何培养自己结构化思维的能力</title><link href="http://naffan.cn/thinking/2017/04/09/1.html" rel="alternate" type="text/html" title="如何培养自己结构化思维的能力" /><published>2017-04-09T00:00:00+08:00</published><updated>2017-04-09T00:00:00+08:00</updated><id>http://naffan.cn/thinking/2017/04/09/1</id><content type="html" xml:base="http://naffan.cn/thinking/2017/04/09/1.html">&lt;blockquote&gt;
  &lt;p&gt;谈话开始的最初30秒决定一切，所以你需要一下子就抓住对方的注意力。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;最近在微信公众号上看到了一篇文章叫做&lt;a href=&quot;http://mt.sohu.com/20170321/n484031234.shtml&quot;&gt;《结构化思维-让项目经理受益三生三世》&lt;/a&gt;，看完以后让我受益匪浅。故想借着热劲儿赶紧写一篇我对结构化思维的理解出来，但是工作需要十十六又正处我转型的过程中，所以一拖再拖没有来得及静下心来思考关于如何让自己掌握结构化思维的问题，好在当时看完了这篇文章以后就顺手在我的代办事务上记下了这个事情，于是之后的每一天电脑都会提醒我这个待办事情，今天终于可以腾出时间好好研究了一下。&lt;/p&gt;

&lt;p&gt;周六加完班吃完饭到家都快10点了，所以就翻出了这篇文章重新温读了一番。但是，感觉这篇文章写的还不是那么透彻。于是，就到网络上搜了一下“结构化思维”这个关键词，不搜不知道，一搜还真是文章一大把呢。但是，在点进前几篇文章阅读以后发现其他的文章无非就是互相改一改案例之类的，雷同的还是挺多的。&lt;/p&gt;

&lt;p&gt;关于“结构化思维”的方法，很多文章都提到了&lt;a href=&quot;http://wiki.mbalib.com/wiki/MECE分析法&quot;&gt;MECE&lt;/a&gt;方法。这个方法我就不再多赘述了，反正只需要记住八个字“相互独立，完全穷尽”即可。具体如何理解，可以参考这篇文章&lt;a href=&quot;https://sanwen8.cn/p/14bZzFA.html&quot;&gt;结构化思维是最值得培养的思维方式&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;下面我来说一下我理解的MECE吧。如果你看了上边我链接的文章或者你曾经看过类似的文章你应该MECE有两种主流结构吧。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;自上而下结构法&lt;/li&gt;
  &lt;li&gt;自下而上结构法&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;其实区分这两种方法是很简单的。首先自上而下的结构法是针对于最终结果是已知的，在知道结果的情况下，去找寻能够完成的方法。举个例子，就是做菜。比如你想要炒个鱼香肉丝。炒鱼香肉丝就是结果，而我们要用自上而下的结构法去分析如何才能完成这道菜。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/09/58ea28b7c12ee.png&quot; alt=&quot;炒鱼香肉丝分析&quot; /&gt;&lt;/p&gt;

&lt;p&gt;根据上面的结构图，我们就能够很快的了解如何去炒鱼香肉丝了。当然，上面这幅图里面炒菜模块下面的结构没有画完整，但是已经能够体现出我想表达的自上而下分析问题的方法了。&lt;/p&gt;

&lt;p&gt;不论生活中还是工作中，自上而下的结构法用处也很多，不过总感觉有点像统筹管理。而且此思维方法感觉更加适用于生活中的安排之类的事情，更深入的思考还是需要掌握自下而上的结构方法。所以，更加关键的还应该是说自下而上更加对自己有帮助一些。&lt;/p&gt;

&lt;p&gt;当我认真的研究自下而上结构法的时候，我在网上看到了这么一篇文章：&lt;a href=&quot;http://news.mbalib.com/story/230292&quot;&gt;如何养成高薪人士的逻辑思维力？&lt;/a&gt;。这个题目一下子吸引到了我的注意力，我觉得作者也挺会给文章起名字的。通读了整篇文章以后，确实发现作者对自下而上结构法有自己的认识并且已经基本上掌握了这种方法。作者在这篇文章中给出了很多的例子，能够帮助我们切身的体会出这里面的道理。&lt;/p&gt;

&lt;p&gt;所有文章看完以后，我准备动手尝试进行归纳总结了。但是，我首先需要找个能够让我进行思考的例子。其实，身边很多事情都能当例子，可是当我突然想去研究一下的时候却发现脑中一片空白。后来突然想到这周六上班在等红绿灯的时候，有很多发广告的农民从车窗中扔进来了很多房产广告。那我就拿这些房产广告作为例子，假设自己要在这些广告中挑选一套房子。&lt;/p&gt;

&lt;p&gt;首先，让我先列举一些自下而上结构法的几个关键步骤：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;头脑风暴：把所有能够想到的想法碎片列举出来&lt;/li&gt;
  &lt;li&gt;连线分组：对这些碎片进行归纳并连线&lt;/li&gt;
  &lt;li&gt;结构提炼：对分组后的结果一一分组，这一步就要依照MECE方法的独立且穷尽来这里了&lt;/li&gt;
  &lt;li&gt;补充观点：因为有了分组了，所以就能够按照这个分组的意义去补充更多的细节了&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;综上所述，当整幅图画出以后，就能够让你一目了然所有的细枝末节了。通过这幅图就能够帮助我们总结归纳然后做出明智的选择了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/09/58ea59cecd09a.png&quot; alt=&quot;房屋小广告&quot; /&gt;&lt;/p&gt;

&lt;p&gt;首先，我按照1中所说的，将我能够想到的关于我认为购置房产时购房者最关心的问题一一列举了出来。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/10/58ea633509f76.png&quot; alt=&quot;QQ20170410-000608@2x&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当然，仅仅这些思维碎片肯定是不够的。但是在刚开始的时候想出的多少并不是关键，我们可以多想想，即使漏掉了在以下的步骤中我们还会再重新审视一遍的，在那个时候因为有了组织结构了，所以更能够帮助自己选定了方向去思考。接下来我就应该将这些碎片进行连线划分了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/10/58ea63354947a.png&quot; alt=&quot;QQ20170410-001458@2x&quot; /&gt;&lt;/p&gt;

&lt;p&gt;通过上图，我们可以看到这些碎片已经被我一一关联了起来。这些线就是我脑中认为的碎片之间的关系。比如单价和平米是一种类型，地理位置和用途是一个类型等等。现在我们可以对这些琐碎的思维碎片进行结构化了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/10/58ea63354c7b7.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这样这里出来以后，我就可以很直观的看到，我现在这个阶段能够考虑到的就是这几个组织结构：价格，环境，用途，利益。&lt;/p&gt;

&lt;p&gt;在这幅图中，我有个思考过程。其中用途相关这里，为什么类型和政策会放在这里呢？没错，是MECE。我是这样想的，类型就是这个房子是商住两用的还是住宅的还是商驻的。政策就是国家规定这个房子是用来干什么的。其实考虑到如果把政策放到利益相关这个组织里面，那就代表我认为的政策是国家对买卖房屋出的限购之类的政策了。我本意并非如此，我想的是国家对这种房子的规划，也就是说这种房子将来政府会把他归属于那种类别怎么用。因为这样的考虑所以我把政策规划到用途相关里了。如果，把政策单拎出来放在一个叫做政策相关的结构里，也不是不行。但是，总感觉这个政策相关和我买房并没有太大关系。而且还会和利益产生交集。说了那么多其实我想说明的是，这些归纳总结是属于一个人自己的想法的，即使别人不这么认为，也没多大关系，因为是你自己在总结，你总结出来的东西收益的是自己，而非他人。&lt;/p&gt;

&lt;p&gt;这样，我们已经完成了前三部了。接下来，我们需要进入到第四部，也就是对这些结构补充细节了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/10/58ea64aaf3ced.png&quot; alt=&quot;QQ20170410-004305@2x&quot; /&gt;&lt;/p&gt;

&lt;p&gt;经过，最后这一轮的思考。我将我能够想到的方方面面全部总结到了这张表中。虽说，我对买卖房屋没有太多的经验。但是，如果我按照这个我总结出的标准去看房子，一定不会走眼。在将来的生活中，如果发现了更多的想法我就可以在这张表中继续填加现在没能够想到的细节了。长此以往，买房子这种事情自己就会有主心骨了。也不用听人家说如何如何了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/10/58ea6c7e2817f.jpg&quot; alt=&quot;表格&quot; /&gt;&lt;/p&gt;

&lt;p&gt;通过对每一项细节一一的带入到表中，这样就汇总出来了一份可供我们理解的结构化思维的工具了。通过这幅图我们可以直观的看到很多很多细节，虽然这个例子是拿街边小广告做的，而我也没有买房的意愿，但是我仍然觉得通过这么一归纳，买还是不卖的结果已经了然于胸。&lt;/p&gt;

&lt;p&gt;从表中我们可以看到。相比之下投资性价比最高的还是别墅这一款。但是，由于宣传单上缺少了太多的必要信息了，所以只能实打实的去咨询为好。另外，香江公馆和酒店公寓就稍微差点了，首先房屋是商住两用的，那就意味着房子的质量以及物业费会比住宅不划算很多。但是，价格上确实有很大优势，而这些优势也大都是建立在离城区相对较远上。另外，香江公馆周围的配套设施要比其他的房型都要齐全一些。所以，如果是真正的选择居住的话肯定会选香江公馆。至于艺术农庄这个项目来说，由于农庄的产权是又村子划拨的，他并不受政府的重视，也就是说政府是任由村子自有处置土地的，同样我们可以看出来这个35年使用权有一些问题。我们知道普通住宅使用权是70年，商用是45年。然而这个却是35年。也就是说这种农家院都是由村子管理的，好坏那就要看这个村子的知名度如何了。如果村子还没有发展起来呢，那买这种农场的意义就不存在了。毕竟风险太大，政府说啥就是啥，如果有一天政府要收回征地了，那么房子具体是不是你的也会说不清的。&lt;/p&gt;

&lt;p&gt;好了，经过以上的分析都是出自本人思考以后得出的结论。通过这个方法起初肯定是比价生疏的，但只要勤加练习，就像别人文章中所提到的一样。刻意的这样联系，3个月后，你就刻意融会贯通了。以后再遇见类似的事情，你都可以用这种结构化的思维去解决了。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="thinking" /><category term="思维,能力" /><summary type="html">谈话开始的最初30秒决定一切，所以你需要一下子就抓住对方的注意力。</summary></entry><entry><title type="html">《跟任何人都聊得来》</title><link href="http://naffan.cn/books/2017/04/04/2.html" rel="alternate" type="text/html" title="《跟任何人都聊得来》" /><published>2017-04-04T00:00:00+08:00</published><updated>2017-04-04T00:00:00+08:00</updated><id>http://naffan.cn/books/2017/04/04/2</id><content type="html" xml:base="http://naffan.cn/books/2017/04/04/2.html">&lt;p&gt;今天要分享一本书了，其实一直想做这个栏目。但是，很长时间都没有下定决心去开始做起。另外，这个页面其实已经挂在本博客上已经有半年的时间了，因为jekyll框架没有对分类的文档做分页功能，所以有可能这个分类里面的文章会慢慢的变多变长，在几年时间内这个list页不会太难以忍受，但是如果我写很多的读后感的话，想必加载起来就会费劲起来了。不过还好，现在是刚开始，这些问题不是很急，而且页面展现的样子还是不错的。所以，我打算先这么凑合用着XD&lt;/p&gt;

&lt;p&gt;其实这本书很早就读完了，大概是在2016年6月份吧。起因是部门刚刚组建，招了一批心人。你知道刚建立的部门都跟打鸡血一样，分享什么的不可能差的。所以，大家有分享工作经验的，有分享帮助工具的，居然后来还有人分享看过的电影的，而且别人还特么的听的挺带劲。由于，我是第一个做分享的人。所以，我自然有很大的主动权，就这样我选择了给大家分享一篇我的读后感，主要就是讲人与人之间的沟通的。&lt;/p&gt;

&lt;p&gt;你别小看人与人之间的沟通，你说一个人自从生下来就开始与别的人一起沟通，从小到大你想要什么想做什么都会与别人产生交集，那么小的时候还好，大家都能够让着你，让你产生了自我为中心的思想，所以自己任性一点也没太大的关系。但是，随着你的年龄越来越大。从升学到毕业再到踏入社会，你会慢慢滴发现你的周遭出现了很多都是跟你一样以自我为中心的人，这些人有些不会替别人照相，有些人跟别人经常产生瓜葛。作为主人公的你，肯定会想一想：你能不能以自我为中心改变其他所有人的意愿？如果不能的话，你应该如何去做呢？当然，很自然的就会想如何跟别人产生交流，从而改变彼此的关系。所以，我们可以说。人，立于社会必要沟通。有效（正向）沟通是需要有好的方法的。有了好的方法才能够让沟通的变得事半功倍。也就是因为这个原因，这本书的作者就对沟通展开了思考，从而写下了这本书，书的名字叫做《跟任何人都聊得来》。&lt;/p&gt;

&lt;p&gt;首先，让我们看看书中所说的作者概括的四个关键要素：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;坚持自己的个性，让自己的独特之处发挥作用。&lt;/li&gt;
  &lt;li&gt;准备越充分，你就越自信。&lt;/li&gt;
  &lt;li&gt;永远保持一颗好奇的心，千方百计让自己变得有趣。&lt;/li&gt;
  &lt;li&gt;学会从他人的思维角度出发，真正在意对方。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;第一，人总是对自己的现状不满。如果是直发，就总想着烫成卷发，如果本身就是卷发，又总是羡慕那些直发的。我们总是在两个极端徘徊。&lt;/p&gt;

&lt;p&gt;性格方面也是如此，我们这些内向的人往往想要成为外向的人，因为后者似乎在应对生活及人际关系方面更为自如。观察外向的人如何交流很有益，因为我们可以采纳那些适合自己的技巧。&lt;/p&gt;

&lt;p&gt;其实，相对于交谈，倾听有时候显得更为重要，从倾听中我们也可以获得更多的信息，而在倾听方面，内向性格往往更具优势。&lt;/p&gt;

&lt;p&gt;作者说，他从事沟通力培训很多年。不管是何种身份、教育背景和收入情况，他们或多或少存在着两个方面的问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;交谈困难症&lt;/li&gt;
  &lt;li&gt;倾听困难症&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;不论上面的哪种，他们只要能够结合自身的长处和性格特点，沟通就可以顺利进行。不管我们是偏向于安静还是偏向于表达，这都不是错误。我们越是煞费苦心改变自己，越是努力让自己变得面目全非，就会越感到沮丧。&lt;/p&gt;

&lt;p&gt;第二，作者认为一定要自信，至少看上去要如此。不要不好意思，因为你并不孤单。作者拿自己在研讨会之前的一天对会场做了充分的熟悉，以至作者当在台上演讲的时候并不感到会场的压力。&lt;/p&gt;

&lt;p&gt;可以说，充分准备是让交谈更为顺利的简单方式，预先思考的越多，你就越自信。&lt;/p&gt;

&lt;p&gt;第三，卡耐基曾说过“与其花两年的时间让他人对你感兴趣，不如花两个月的时间真正对他人感兴趣，这样会给你带来更多的朋友。”所以说，改变只能由内而外产生，你只有真心对他人和世界充满好奇，才会真正达到预期的结果。&lt;/p&gt;

&lt;p&gt;第四，如果你能够帮助他人、满足他人所需，在这个过程中你的需要也会得到满足。当你在社交场合犹豫：自己要不要接近某人，开始交谈呢？淡定的主动做出尝试，通常结果会让你非常意外，非常惊喜。&lt;/p&gt;

&lt;p&gt;最后，作者给出了肯定的定理：&lt;strong&gt;没有人是天生的沟通达人&lt;/strong&gt;。只要遵循着作者提供的“工具”，就能够对下面这些问题得出结论：&lt;/p&gt;

&lt;p&gt;如何了解真实的自己，找到适合自己的沟通技巧。&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;如何深入倾听他人。&lt;/li&gt;
  &lt;li&gt;如何有效地提问。&lt;/li&gt;
  &lt;li&gt;如何将压力转化为创造性能量。&lt;/li&gt;
  &lt;li&gt;如何恰到好处地结束一次交谈。&lt;/li&gt;
  &lt;li&gt;如何应对比较棘手的局面。&lt;/li&gt;
  &lt;li&gt;如何应对移动互联时代的沟通问题。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;好了，有了这些基本的介绍，我想也让你明白了这本书要讲的那些道理了。其实，道理都很简单。但是，当你真正的要去做的时候，却发现如此之难。这并不怪你，因为大家都是这样的。任何事情都包括主动方和被动方。我们要做的就是让这两方融为一体，让这两方傻傻分不清楚XD。适用于每个人的方法是不同的，所以我们找不出标准答案。但是，有个原理可以帮助我们判断。那就是只要是你遵循着你的真性情，就一定不会错。&lt;/p&gt;

&lt;p&gt;人大体上可以分为两类，一个是内向型，一个是外向型。书中也对这两类做了明确的定义。&lt;/p&gt;

&lt;p&gt;“内向型”是指那些通过独处就可以获得能量的人。他们并不一定很害羞，但是，在和一群人相处之后，他们更需要个人的空间。他们倾向于在内心里自我反思，而不是和他人一起交流自己的想法。可能在集体讨论时他们不太容易参与其中，但是，之后他们会独自把问题思考一遍。通常情况下，他们的最终结论都是很可靠的，而且是经过深思熟虑的，当然，这样的结论有时需要更长的时间来酝酿和总结。他们并不是不善言谈，只是倾向于先思考再开口。&lt;/p&gt;

&lt;p&gt;“外向型”是指那些通过群体交流获得能量的人。他们倾向于通过交谈来思考。人越多，他们越是活跃。交谈中，他们通常都能够最好地表达自己的观点。他们反应敏捷，不会因为人多势众而恐慌。可能一开始的结论略显浅薄，不过，他们会意识到这不过是整个过程的一部分，最后会有更好的结论。&lt;/p&gt;

&lt;p&gt;那么如何分辨你是内向型还是外向型的呢？书中也给出了一套题，做完根据所得分数就能够算出你是属于哪一类的。其实我觉得这个题没太大必要，谁不了解自己的性格啊？我们关心的是不管我们是啥性格，在遇见事儿的时候，用哪种解决方法更为合适罢了。或者说，哪种性格可以在社会上混的更开而已。另外，我们需要的是沟通技巧，比如当一个人表达了他自己的意见以后，你应该如何回复才能够让事情向着你更愿意看到的结果为导向。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="books" /><category term="沟通,书籍" /><summary type="html">　　迈克·贝克特尔（Mike Bechtle），亚利桑那州立大学教育学博士，有多年的大学及政府部门的从业经验，现任富兰克林科威公司(Franklin Covey---由《高效能人士的七个习惯》作者Stephen R. Covey博士创建)高级培训顾问，先后为世界500强企业进行过2500多场研讨会形式的讲座，是名副其实的金牌培训师。　　著有《跟任何人都聊得来》《自信谈话第一书》《疯狂行为学》等畅销书，曾在《企业家》（Entrepreneur）杂志上发表多篇文章。</summary></entry><entry><title type="html">为什么倒热水的和倒冷水的声音不一样？</title><link href="http://naffan.cn/thinking/2017/04/04/1.html" rel="alternate" type="text/html" title="为什么倒热水的和倒冷水的声音不一样？" /><published>2017-04-04T00:00:00+08:00</published><updated>2017-04-04T00:00:00+08:00</updated><id>http://naffan.cn/thinking/2017/04/04/1</id><content type="html" xml:base="http://naffan.cn/thinking/2017/04/04/1.html">&lt;p&gt;前几天在公司接水的时候，接了一瓶热水。热水发出的声音突然抓住了我的注意力，倒热水的声音明显比倒凉水的声音高且闷，这让我感到了浓厚的兴趣，于是本文的题目这个问题就产生在了我的脑子里。我打算过几天研究一下看看这个是为什么，不过正好我的工作有了较大的变化，拖了我一个星期之久，现在就来看看是什么原因导致的倒热水合倒凉水的声音不相同呢？&lt;/p&gt;

&lt;p&gt;首先，从问题中就能想到，肯定是温度导致这个显现的。那么为什么热的水声音就高呢？带着这个问题首先查了下知乎的文章，从&lt;a href=&quot;https://www.zhihu.com/question/38401210&quot;&gt;《开水和冷水倒在地上的声音为什么不一样》&lt;/a&gt;看到很多的答案，还真有个相当专业的回答者从物理学的角度回答了此问题。通篇看下来，答者跳过的步骤还真是多，如何求证的推到也没有写具体，只是列举了他自己认为的关键公式而已。而最后的他给出答案是&lt;strong&gt;温度越高，声音的频率越低&lt;/strong&gt;。再让我查一下声音频率越低，声调会怎样后发现，是越低沉。好了，这样我们有了理论基础就可以打遍天下无敌手啦。其实这个是用科学公式的方法去证明这个问题现象的。那么我们要是在跟人家聊天的时候，也搬出这个公式来，那试想谁会有空跟你掰扯这个呢？&lt;/p&gt;

&lt;p&gt;那让我看看别的解释吧，有人说热水中的分子运行更快，导致热水的流动性更高，粘稠度更低。就像蜂蜜一样，凉蜂蜜流的会比热蜂蜜更难更慢。所以，在倒热水的时候，由于分子活动的更加频繁，所以声音也就发出的更大。&lt;/p&gt;

&lt;p&gt;还有一些人说这是因为水蒸气的原因，因为热水周围时刻被水蒸气包围，所以当你倒热水的时候，接触地面的首先不是水，而是水蒸气，也就相当于水蒸气包裹住了水先接触地面，所以水蒸气起到了缓冲的作用，也就造成了声音显得低沉了许多。&lt;/p&gt;

&lt;p&gt;最后，让我们看看&lt;a href=&quot;http://www.1010jiajiao.com/czwl/shiti_id_9a1fd2b0fe8237e085782c5d94051758&quot;&gt;初中物理&lt;/a&gt;中是怎么阐述这个问题的吧。当然，这道题是初中物理的习题，说明问题的深度不高，只是一个概念而已。&lt;/p&gt;

&lt;p&gt;　　&lt;/p&gt;</content><author><name>张一帆</name></author><category term="thinking" /><category term="自然" /><summary type="html">前几天在公司接水的时候，接了一瓶热水。热水发出的声音突然抓住了我的注意力，倒热水的声音明显比倒凉水的声音高且闷，这让我感到了浓厚的兴趣，于是本文的题目这个问题就产生在了我的脑子里。我打算过几天研究一下看看这个是为什么，不过正好我的工作有了较大的变化，拖了我一个星期之久，现在就来看看是什么原因导致的倒热水合倒凉水的声音不相同呢？</summary></entry><entry><title type="html">通过命令行获取NAS 320L权限</title><link href="http://naffan.cn/tech/2017/03/24/01.html" rel="alternate" type="text/html" title="通过命令行获取NAS 320L权限" /><published>2017-03-24T00:00:00+08:00</published><updated>2017-03-24T00:00:00+08:00</updated><id>http://naffan.cn/tech/2017/03/24/01</id><content type="html" xml:base="http://naffan.cn/tech/2017/03/24/01.html">&lt;p&gt;　　5年前买的DLINK的NAS一直在被我用来当做NFS用。当时买回来这货就是看中了可以和远程迅雷绑定，可以是实现在任何地只要知道下载链接就可以通过远程迅雷将下载任务直接拖拽到家中的NAS中，这样我在上班的同时，就可以利用家里的网络下载一些自己喜欢的电影，等到家了以后就可以直接用平板通过SMB协议访问到NAS上，这样就可以直接看电影了。其实这东西还挺好用，给我这几年的生活带来了很大的快乐，但是就是总会有意想不到的事情发生。这玩意在16年中旬的时候坏过一次，拿到DLINK客服那里想修一下，结果发现这货早就停产了，只能从总部发一个新的回来供我置换，并收我160元置换费。我只是怕麻烦，又因为自己已经熟悉了这个产品了所以就答应了他们的提议。可没成想换回来以后发生了一件让我到现在都很头疼的事情，那就是远程迅雷这套脚本增加了安全机制了。貌似是DLINK和迅雷在这款产品上有了分歧，迅雷不让用户在smb协议下直接删除所下载下来的文件了，如果想下载还必须登入他们的远程下载网站去删除。这样让我非常恼火，远程迅雷的用户体验本来就不好，却还逼着用户访问他们网站去删除已经存在自己NAS中的资料。&lt;/p&gt;

&lt;p&gt;　　就因为这个问题刚开始我还以为是人家客服给我换回来的是一个残次品而我又亲自找他们去了一趟，后来不成我还给他们总部的客服打电话，最后给我转到了他们的高级技术人员才真正证实了这件事不是DLINK的问题，而是迅雷在安装到NAS上的脚本做了些文章。&lt;/p&gt;

&lt;p&gt;　　接下来我就说说来龙去脉吧。当我想删除NAS上的文件时，总是有报错信息。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/03/24/58d4011869c21.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　就光凭这种报错信息我很难发现是哪里的权限出了问题，但是优先想到的就是NAS上有什么权限。于是我还特意登录了NAS的浏览器后台去设置了我的用户组。但是，通过很多次测试根本就没有用处。也就是说问题不出在应用层面上的权限问题。而后台中的用户组其实是针对访问内容时的用户设计的。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/03/24/58d4011884114.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　接下来我就想看看，到底底层给我返回的是什么状态码，好让我能够有目的性的去排查。结果，我通过wireshark找到了真正原因。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/03/24/58d40118b9a96.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　看到SMB条目下边的 nas NT Status: STATUS_ACCESS_DENIED (0xc0000022)错误代码了吧。这就说明了一切的问题。是由于NAS中的权限配置的原因造成的，而罪魁祸首肯定是迅雷的脚本做的怪。&lt;/p&gt;

&lt;p&gt;　　好了，问题确定了，我们就要想方设法的去获取NAS的权限。NAS的系统是UNIX的，所以我们需要用ssh区连接。但是，我在连接的时候出现了问题。问题是这样的，在windows上用putty就可以ssh到NAS上，但是在mac上我用ssh就不能够连接上。后来，通过查询报错信息，在网上搜了一下发现了问题所在。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/03/24/58d40118580dd.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　错误提示说不能与nas进行联通，原因是没有找到匹配的宿主key，而且服务器的宿主协议只接受ssh-dss(DSA)。将这段话作为关键词在搜索引擎上搜了一下，果然找到了这个错误提示的响应的解决办法。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/03/24/58d4011876a07.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　这说的是openSSH 7.0或者更高版本的应用是默认关闭这个公钥算法的，因为这个算法太容易破解了。而后，这篇文章&lt;a href=&quot;http://cache.baiducontent.com/c?m=9d78d513d99f1cb8589ccb2d4b478d3d450197634d8d8d5439c39339ca3310564717a5f065750704a29121205df95e5d9ae73605200351f1c19fd30acabbe3757bdc7074671df65613a00eafba07649b37912afeaf6ff0bb8064d2efc6949f0a5c9015433897f1f8471d518f2ae71446bee4ce14541e4aaded4734a2066a77c87613e70ceee0453441dea8&amp;amp;p=ce71c64ad48911a05bed9122544191&amp;amp;newp=8033d315d9c041aa1bbe9b7c527a82231610db2151d6d501298ffe0cc4241a1a1a3aecbf26291b04d1ce786405a44257e9fa3274360234f1f689df08d2ecce7e6c&amp;amp;user=baidu&amp;amp;fm=sc&amp;amp;query=no+matching+host+key+type+found%2E+Their+offer%3A+ssh%2Ddss&amp;amp;qid=b4c9b66f00047dfc&amp;amp;p1=2&quot;&gt;《OpenSSH Legacy Options》&lt;/a&gt;也给出了响应的答案。按照帮助文档的提示下，我迅速的登录到了NAS的系统中，并且获取到了NAS的管理员权限。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/03/24/58d40118855b1.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　之后，就是要找到迅雷的脚本了，我想这个脚本应该不难找也不难改，无非就是一个.sh的文件而已。等到下次我研究出来，再发一篇文章上来。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="tech" /><category term="nas" /><summary type="html">　　5年前买的DLINK的NAS一直在被我用来当做NFS用。当时买回来这货就是看中了可以和远程迅雷绑定，可以是实现在任何地只要知道下载链接就可以通过远程迅雷将下载任务直接拖拽到家中的NAS中，这样我在上班的同时，就可以利用家里的网络下载一些自己喜欢的电影，等到家了以后就可以直接用平板通过SMB协议访问到NAS上，这样就可以直接看电影了。其实这东西还挺好用，给我这几年的生活带来了很大的快乐，但是就是总会有意想不到的事情发生。这玩意在16年中旬的时候坏过一次，拿到DLINK客服那里想修一下，结果发现这货早就停产了，只能从总部发一个新的回来供我置换，并收我160元置换费。我只是怕麻烦，又因为自己已经熟悉了这个产品了所以就答应了他们的提议。可没成想换回来以后发生了一件让我到现在都很头疼的事情，那就是远程迅雷这套脚本增加了安全机制了。貌似是DLINK和迅雷在这款产品上有了分歧，迅雷不让用户在smb协议下直接删除所下载下来的文件了，如果想下载还必须登入他们的远程下载网站去删除。这样让我非常恼火，远程迅雷的用户体验本来就不好，却还逼着用户访问他们网站去删除已经存在自己NAS中的资料。</summary></entry><entry><title type="html">说一说我理解的商业模式</title><link href="http://naffan.cn/thinking/2017/03/22/1.html" rel="alternate" type="text/html" title="说一说我理解的商业模式" /><published>2017-03-22T00:00:00+08:00</published><updated>2017-03-22T00:00:00+08:00</updated><id>http://naffan.cn/thinking/2017/03/22/1</id><content type="html" xml:base="http://naffan.cn/thinking/2017/03/22/1.html">&lt;p&gt;　　今天，我在路上翻阅我在微信上关注的公众号时突然看到一篇文章是讲产品经理的文章，这篇的作者就以他个人的观点阐述了一下他理解的商业模式的概念，通读他的文章后突然就想抒发一下我自己理解的商业模式了。商业模式这个词近几年我是频频看到过，但每次都对这个词有各种的不懂，今天正好又再一次看到了这个词汇，所以就想逼着自己去整理下自己对商业模式这个词的理解，我不能说我对这个词有什么高谈论阔或者深入的了解，只是觉得我应该自己去真正意义上的思考一下了。&lt;/p&gt;

&lt;p&gt;　　最近也同时在读一本书，书的名字叫&lt;a href=&quot;https://item.jd.com/11435655.html&quot;&gt;《如何阅读一本书》&lt;/a&gt;，书中就阐述了一些关于自己是否真正吸纳到了真正属于自己的知识。书中大概的意思就是说，作者写出的文字你是否理解是可以通过读者用自己的话语重新表达一番作者的意思，如果用自己的话阐述出来的意思和作者基本一致，那么就算读者真真正正的理解了作者所写所想，然而如果读者不能完成而总是借用作者的词语的话那么就是所谓的不懂。我深深的信服这句话，之前也看过一篇文章讲到知识和信息的关系，那篇文章说网络上的信息很多，任何人都可以获取到同样的信息，然而要使这个信息为己所用就要通过自身的理解去消化信息，从而让信息变成自己的知识。所以说，这篇网络上的文章和这本书中所讲是不谋而合的。所以，我才试图逼着自己去消化我看到过的信息。而这篇文章就是我在实践这个道理，不论我所写的是多么的词不达意。只要我尝试着去做，一次两次写不出深意，然而百八十次自然就会融会贯通。&lt;/p&gt;

&lt;p&gt;　　我随便在百度上搜了一篇关于讲“商业模式”的&lt;a href=&quot;http://www.managershare.com/wiki/商业模式&quot;&gt;文章&lt;/a&gt;，其中作者把它简单地定义为&lt;strong&gt;商业模式就是公司通过什么途径或方式来赚钱&lt;/strong&gt;。而紧接着就举了汽车公司、食品公司、快递公司的例子。而这位作者的理解正好和我看到的公众号上的文章有所出入，公众号上的文章作者把商业模式简单的定义为&lt;strong&gt;商业过程中我们为用户创造了什么价值&lt;/strong&gt;，而作者又定义了一下盈利模式&lt;strong&gt;我们怎么赚钱，收入来源及结构&lt;/strong&gt;。可以发现第一位作者理解的商业模式是第二位作者的盈利模式，也就是说第一位作者将商业这个词理解为金钱的获取的一种模式，而第二位作者认为商业模式是单纯的站在用户的观点上寻找用户需求。我们很难说清楚两者孰优孰劣，因为每一个人心中都有一个哈姆雷特。正因为这所以每个人对商业模式的理解都是不一样的。所以我们大可跳出这两位作者的理解去归纳自己认为的商业模式，也就是说你认为是什么意思就是什么意思。&lt;/p&gt;

&lt;p&gt;　　我自以为要想分析商业模式的概念，就要从表及里的去分析。我们完全可以按照字面上的意思先行做出一个笼统的判断。比如商业模式是由两个词构成，一个是商业一个是模式。那么就先让我们看看商业这个概念。于是，我在百度百科中搜索了商业这个词条，是这么定义的：&lt;strong&gt;是一种有组织的提供顾客所需的商品与服务行为&lt;/strong&gt;。这里面包括几种意思：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;提供商品与服务&lt;/li&gt;
  &lt;li&gt;给需求方&lt;/li&gt;
  &lt;li&gt;有组织性&lt;/li&gt;
  &lt;li&gt;一种行为&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;　　当然商业是一种行商词汇，何为商？就是既有需求方又有供给方。商业是需要供给双方的一种行为，那既然有了供给就必然是一种有人付出和有人所得的。这也就是说双方是通过互换东西的行为，而这个东西不必是金钱，只要是双方都认可的东西即可。通过这点，我稍微觉得第一位作者把商业理解的稍微单一化了。&lt;/p&gt;

&lt;p&gt;　　我们再接下来看模式这个词汇。百度百科上是这么写的：指事物的标准样式。这句话理解的难点主要体现在样式这个单词上。什么叫做样式？是一种样子款式么？其实，我更认为这是一种抽象概念。本人是学计算机的，对于计算机语言中所讲的抽象和模式是有一点自己的理解的。站在编程角度上理解模式的存在意义是由于刚开始的代码编写杂乱无章，而当项目庞大的同时代码就会变得难以驾控，所以我们要为了化繁为简制造出一种有利约束的模式出来。其实这也印证了上面的那个有组织性的概念。&lt;/p&gt;

&lt;p&gt;　　其实，说了这么多无非就是咬文嚼字罢了。我们终归还是需要将其归纳成一个更好理解的概念出来。当然，我们还是会侧重这个模式来解释，因为模式才是最重要的概念。因为是模式，那么肯定每个商业有其特有的特点嘛。所以，我总结的就是&lt;strong&gt;符合自身商业发展的预先设计好的一种行为&lt;/strong&gt;。如果按照大白话的想法去理解，肯定大家都会说我看了那么多，你就给我看这个？其实仔细想想还真有的那么一点可以玩味的概念在里面吧。按照我的理解来说，商业模式跟盈利没有太大的关系，也不是站在什么用户的角度上看我们能给他们带来什么价值之说。要真是按照第二位作者来理解的话，我更觉得他的解释应该对应的是商业价值。所以说，模式就是模式。就是一种规范前人干过的事情的总结与归纳并且制定出一套不用再去重复造轮子的规则而已。至于商业来说嘛，自然是为了自己的商业发展而定的模式喽。&lt;/p&gt;

&lt;p&gt;　　现在，很多人都解释过商业模式一词。可是，一个企业最看重的就是自己的挣钱诀窍的涉密性。人家不可能平白无故的就让外人通过几句话的分析就能够摸透其中的奥秘吧。所以，也就是说我们所能够分析到的商业模式是人家的皮毛而已，这些书面上的东西拿到真实的场景里，哪个能够快速并且正确的起效呢？想必是没有吧。但是，我想说商业模式必定是经过当事人很长尝试出来的结果，这里面包括成功与失败。所以，这个模式就是人家的血泪史的见证。他们在慢慢的重构自己的思想和方向，从而达到了适合他们自己的商业模式。而我们完全可以窥探到他们用的方法。即使得不到与他们完全一致的方法，至少这也是自己来迭代出来的一套思想。&lt;/p&gt;

&lt;p&gt;　　你们会不会感觉我写这篇文章来讲商业模式很空虚乏味呀？我真心认为如果你读到这肯定会说这写的是什么玩意啊。但是，我确实想说一下，现在在网上找到的讲商业模式的文章哪个不是说的云里雾里的呢？有那几个能够接地气的呢？如果真的接地气的话，我相信商业模式早就能有个标准答案公布在网上了。我只是将我的个人不成熟的思想记录在这里，等将来有了更加深刻的理解以后再重新修改本篇文章呗。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="thinking" /><category term="思考,商业模式" /><summary type="html">　　今天，我在路上翻阅我在微信上关注的公众号时突然看到一篇文章是讲产品经理的文章，这篇的作者就以他个人的观点阐述了一下他理解的商业模式的概念，通读他的文章后突然就想抒发一下我自己理解的商业模式了。商业模式这个词近几年我是频频看到过，但每次都对这个词有各种的不懂，今天正好又再一次看到了这个词汇，所以就想逼着自己去整理下自己对商业模式这个词的理解，我不能说我对这个词有什么高谈论阔或者深入的了解，只是觉得我应该自己去真正意义上的思考一下了。</summary></entry><entry><title type="html">看《大秦帝国之崛起》有感</title><link href="http://naffan.cn/thinking/2017/03/08/01.html" rel="alternate" type="text/html" title="看《大秦帝国之崛起》有感" /><published>2017-03-08T00:00:00+08:00</published><updated>2017-03-08T00:00:00+08:00</updated><id>http://naffan.cn/thinking/2017/03/08/01</id><content type="html" xml:base="http://naffan.cn/thinking/2017/03/08/01.html">&lt;blockquote&gt;
  &lt;p&gt;人生据说是一部大书。假使人生真是这样，那么，我们一大半作者只能算是书评家，具有书评家的本领，无须看得几页书，议论早已发了一大堆，书评一篇写完交卷。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;前些日子刚刚看完了&lt;a href=&quot;http://naffan.cn/thinking/2017/02/26/1.html&quot;&gt;《大明王朝1566嘉靖与海瑞》&lt;/a&gt;后，趁着自己对海瑞的看法赶紧写下一篇读后感，写完以后发现自己虽然感慨颇多并且也在网上看了各种讨论关于海瑞性情的文章，但是到真正要下笔写一篇读后感的时候思维却无比混乱，就连那一丝的灵感也消失殆尽了。只能怨自己语文功底太差，对文章的总体把握没有做好。这就如同我小时候最不愿意写作文的情况一样，每当我写文章的时候写着写着就忘记前面写的是什么了，导致越写越脱离文章主旨，最终只能草草了事。&lt;/p&gt;

&lt;p&gt;虽然，自己有很多的这种那种的问题，但是我终归还是信‘有志者事竟成’这句古话的，就算自己做的不够好，但是自己努力去做就会越做越好，越来越棒的。&lt;/p&gt;

&lt;p&gt;看了大明王朝以后，发现优酷会员里同时还在推另一部史诗巨作《大秦王朝之崛起》，于是乎就打开尝试的看了一看。上来第一集就是芈八子带着年幼的嬴稷从楚国秘密回国，而回国途中遭遇了刺客袭击。虽然我现在能够讲出这女人是谁，他们在干什么。但是，我第一次看的时候真是一脸懵逼。因为，我对中国的历史并不感冒，中学时代老师教给我们的历史课也是跟同学嬉嬉笑笑，打打闹闹的过去的。等到长大了才真正的想去了解一下中国战国时期的历史以及历史典故，我真狠小的时候不懂得珍惜。不过，话说回来，我们这一代中像我这样的也不是少数。所以，我也不用妄自菲薄，多少人都和我一样小的时候也是嬉戏打闹的过来的。至少，现在我有机会去认真的了解一下这段历史。&lt;/p&gt;

&lt;p&gt;大秦帝国这部电视连续剧其实之前还有两部，一部是裂变，一部是纵横，这部是第三部叫崛起。剧情如剧名，秦国正处在崛起之中。那想必前两部肯定有一部是将衰落的，等我看完了第三部以后现在又在追第一部，发现第一部时秦国还真是弱小。不过，这篇文章我是想写崛起给我的启发的，故不再赘述有关于前两部的剧情了。&lt;/p&gt;

&lt;p&gt;这部电视剧讲的是亲昭襄王嬴稷的一生，从突然即位时自己的生母宣太后独揽朝政与自己的叔父魏冉独揽军权，到慢慢长大后从总是做错事让别人给他擦屁股而后成长为一个稍有能力的君王，再到获得了范雎的辅佐废除母亲的专权取缔叔父的兵权，最后与赵国打了一场持续三年的长平之战后令白起屠杀四十万降兵，最终听信谗言差点毁掉秦国然而自己奋然觉醒后奠基秦国之道。整部电视剧基本虽然改编自小说，但是基本还是比较尊重历史的，虽然拍摄技巧以及人员能力上都不及大明王朝，然而也算是烘托出了一张宏大的画卷。&lt;/p&gt;

&lt;p&gt;这部戏有几个重要人物需要罗列一下。第一个就是&lt;a href=&quot;http://baike.baidu.com/link?url=-YHwkAum11qAcM8HUG09jtl069aW_JFPJY3f-bh1QupG2MwVqscYvBINigF8aYIN-CqKknBcVQpLf81ET5i-FFjV-SLvlNV0d049JV5vfqoqnqVQiiLbi85x_CzHWHCsLdITGqjGzYfz1FCES3V8U28V0jf_apA1ySLz8uc-btgUD-ENSCL90qrCidPyayPv&quot;&gt;嬴稷&lt;/a&gt;，他是继秦武王之后的君王（当时还没有皇上一词，皇上一次始于秦始皇，也就是嬴稷的儿子的孙子），也是全剧的主角。第二个是&lt;a href=&quot;http://baike.baidu.com/item/宣太后?fromtitle=芈八子&amp;amp;fromid=7272089&amp;amp;type=syn&amp;amp;sefr=cr&quot;&gt;宣太后&lt;/a&gt;，也称芈月，芈月传就是讲的她。第三个就是&lt;a href=&quot;http://baike.baidu.com/item/魏冉/18255?sefr=cr&quot;&gt;魏冉&lt;/a&gt;，他在嬴稷还不能掌握兵权时一直在保护秦国。第四个就是&lt;a href=&quot;http://baike.baidu.com/item/白起/131407?sefr=cr&quot;&gt;白起&lt;/a&gt;，他是秦国的战神，一生杀敌无数，致死都没有打过一场败仗。但是后来被小人谗言致死。第四个就是前面说的这个小人&lt;a href=&quot;http://baike.baidu.com/item/范雎?sefr=cr&quot;&gt;范雎&lt;/a&gt;，虽然称其小人，他还真能对得起这个称号，但是他虽没有大量却拥有治国之才，也是后来嬴稷任他做丞相以后秦国才慢慢的发展壮大起来的。第五个则是&lt;a href=&quot;http://baike.baidu.com/item/苏秦/7043?sefr=cr&quot;&gt;苏秦&lt;/a&gt;，他是一个纵横家，如果没有苏秦的灭齐之举，秦国恐怕会被齐国灭亡。&lt;/p&gt;

&lt;p&gt;在战国时期，七个国家都受制于其他国家，如果一个国家过于强盛其他六国均会想尽一切办法来削弱之。所以，在这个年代国家之间的勾心斗角屡见不鲜，比如田文的联合齐魏韩伐楚，合纵韩魏伐秦，六国合纵伐齐等等层出不穷，其实位的都是一个利字。这也跟现如今的国家与国家之间的关系一样，此消彼长，互相制约。目前，“萨德”一事就因朝韩关系紧张所致，而美国则是韩国的依靠在韩国意欲建立反导弹系统，而防御范围却涉及我国大陆安全，现在闹得沸沸扬扬，中国已经对韩国采取了经济上的制裁，比如关闭韩企乐天超市，禁止韩国旅游团等等。我们生活在这个风云跌宕的时代，时时刻刻都会感受到国际上的压力。所以，国与国之间的斗争是从未停止的，也不会停止。最终只会有两种结果，要不就是自己灭亡，要不就是灭亡他国，最终走向统一。而说回秦国，秦国也是从一个弱小国家开始，经过商鞅变法后才慢慢恢复元气从而变得越来越强大，而后经过秦人几代人的努力，才在天时地利人和的条件下统一了中国。论能力嬴稷的才能是知人善任，而又能攻于人心。他很好的利用了苏秦的反间计，重用了小人之心的范雎，这是一般的人很难做到的。我想嬴稷之所以这样是跟他继位时的经历有关的。嬴稷在他22岁的时候加冠亲政，但是一直就是王权旁落，而宣太后掌握政权，穰侯掌握军权，自己俨然是个傀儡，这个问题他自己也是意识的到的。就因为人都有种想被别人认可的心态，所以他才自作主张以协商之由哄楚王前来而后扣押楚王，信任田文而后田文受排挤不被重用又回到齐国后合纵攻秦。这两件事情皆说明了他想摆脱母亲的掌权去做自己认为合适的决策，但是最后还是由于自己的决定过于草率引来了意想不到的结果，最终还是要让宣太后和穰侯替他擦屁股。他是希望自己来管理国家大事的，所以他一直想找一些能够读懂他心思的人来辅佐他，而到了后期在他思想已经形成体系的时候碰到了范雎，在大家皆反对认范雎为丞相时，嬴稷毅然决然的启用了范雎。而范雎在王稽府上跟王稽说要想让王上启用他的时候，他说出了要想让王启用他就要了解嬴稷的喜怒哀乐，爱恨情仇。真因为范雎深深的赢得了嬴稷的内心，同时也赢得了这个丞相。在秦国的发展中我们可以看到嬴稷并没有选错人，而这更佐证了嬴稷会用人。&lt;/p&gt;

&lt;p&gt;让我们再来说说白起，论战法白起算是门道高手，他被但是的人成为战神，都说只要战争拥有他就是必胜的标示，以至于当时的人不知秦王都不会不知白起。就这样白起的名声很大，以致于盖过了君王。中国有句古话“功高盖主”，一旦这样的话难免会让王上对他起猜疑，何况嬴稷旁边还有个范雎呢。在&lt;a href=&quot;http://baike.baidu.com/item/长平之战/66472?sefr=cr&quot;&gt;长平之战&lt;/a&gt;中，白起担起了统帅一职，经过自己对兵书的研读和久经沙场的经验最终打败了赵军。然而，军粮不够用，赵国的降兵如何处置让他没有办法。于是，他奏请了一封信给秦王，想让秦王拿主意。然而，嬴稷准备发诏的时候被范雎拦住了。最终，写了一纸空诏寄回给了白起，榆次同时又把白起的媳妇带到了白起身边。白起当然明白空诏就是让自己自行处理，而让老婆过来就是让自己做一道选择题，是选家还是选国。最终，白起还是在黑夜中趁着40万赵军熟睡的情况下杀死了这40万的降兵。而后，白起准备一举拿下邯郸时，嬴稷听信范雎意见命白起收兵回城，白起听到后叹气时机已过。后来，白起以病为由不再领兵打仗，任由嬴稷跑来几趟，皆是拒绝带兵出征。而后，嬴稷认为白起有可能造反就赐给他宝剑让他自问。其实，比起说白起不带兵是怕输掉这场战争，不如说是白起对范雎的一种抗拒。白起肯定会知道，自己的谗言肯定是范雎这小子闹得，所以他用这种态度来保持无作为。然而，当嬴稷最终认为白起忠的是国家，而非自己。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="thinking" /><category term="思考,观后感" /><summary type="html">人生据说是一部大书。假使人生真是这样，那么，我们一大半作者只能算是书评家，具有书评家的本领，无须看得几页书，议论早已发了一大堆，书评一篇写完交卷。</summary></entry><entry><title type="html">看《大明王朝1566嘉靖与海瑞》有感</title><link href="http://naffan.cn/thinking/2017/02/26/1.html" rel="alternate" type="text/html" title="看《大明王朝1566嘉靖与海瑞》有感" /><published>2017-02-26T00:00:00+08:00</published><updated>2017-02-26T00:00:00+08:00</updated><id>http://naffan.cn/thinking/2017/02/26/1</id><content type="html" xml:base="http://naffan.cn/thinking/2017/02/26/1.html">&lt;blockquote&gt;
  &lt;p&gt;有了门，我们可以出去;有了窗，我们可以不必出去。 –钱钟书&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;　　最近，机缘巧合在优酷看到了这部电视剧。因为家里有人在看所以顺便打开来就是随便地看一看，心想如果没什么意思或者拍的都是小鲜肉之类的就不继续看下去了，如果拍的是历史题材那么正好可以补一下我对中国古代的历史知识的匮乏。于是，就打开了这个视频。记得刚打开的时候演的是冯宝在午门之外杖打周云逸，直接就给观众一个大大的悬念，之后镜头一转就出现了&lt;a href=&quot;http://baike.baidu.com/item/朱厚熜/2412426&quot;&gt;嘉靖皇帝&lt;/a&gt;，一看原来是&lt;a href=&quot;http://baike.baidu.com/subview/27898/5991996.htm&quot;&gt;陈宝国&lt;/a&gt;演的嘉靖，这一来对此剧倍感兴趣。原因是，很早看过大宅门，陈宝国在剧中给我的印象极其深刻。慢慢的随着电视剧的深入一集比一集精彩，再加上演员们都是戏骨，刻画的历史人物极其逼真。另外，也不得不说群众演员演的也极其认真，可见本剧导演&lt;a href=&quot;http://baike.baidu.com/item/张黎/2786610&quot;&gt;张黎&lt;/a&gt;功底之深。这个剧可要比当下也很流行的《大秦帝国之崛起》拍的要好上不止好几倍。&lt;/p&gt;

&lt;p&gt;　　那么，我为什么想写一篇多后感呢？究其原因是因为在深入看这部剧的同时也让我不得不让我积极的思考一个问题，剧中人物的性格与做事动机皆由之前的某个细节或者消息而引出，这些消息在剧中是有过交代的 ，在我看的过程中确实没有引起我的注意，但随着事件的发生当我再倒回去重新看的时候发现自己确实没有理解剧中已经明确表达过的含义。这种情况不是一两次而已，基本上本剧每一集都会包含大量信息。所以，这让我产生了一种想法，我应该尝试着去写一篇我的理解为好，即便是有些肤浅也好，逻辑不清也罢，只要我用心的去抽丝拔茧的捋一捋自己的思路，事不过三次而，必能给自己一个在思想上的提升。&lt;/p&gt;

&lt;p&gt;　　上面说了那么多，也已经表达出了我的作案动机，剩下的就是我如何去思考了。于是，我重新跟着本剧快速的写下了大纲。
&lt;img src=&quot;https://ooo.0o0.ooo/2017/02/27/58b3030e54da6.jpg&quot; alt=&quot;IMG_0523&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　首先，要想理解剧中每个人物的动机就要先熟络剧中人物的关系。所有人的boss当然是嘉靖皇帝，嘉庆皇帝的要务就是管理国家的同时制衡手下的权势，同时也在为自己的修仙事业坚定不移的花费大笔的钱财。由于嘉庆皇帝几十年的不上朝，国家的所有朝务全权交给内阁来处理，这个关系大家都明白，皇帝本人如若想要修仙就不得不投入大笔的时间去吃丹练仙，那么国家的事务只能找一个部门替他管理，那么内阁就是不二之选。内阁成员由严嵩和徐阶组成，严嵩是内阁首辅，徐阶是次辅兼户部尚书，也就是说严嵩是徐阶的老大，但是徐阶是一直想当首辅的，然而严家的势力极其庞大所以一时也没有好办法。除了内阁是第一集团中的老大以外还有一个部门叫做司礼监，这个部门是由太监组成，司礼监的任务就是照顾皇帝的衣食住行并且也有极其重要的发言权，所以明朝的太监相比于其他朝代都要可怕。司礼监掌印太监是吕芳，也就是司礼监的老大，在他下边有几个秉笔太监，其中包括黄锦和陈洪。由于太监的独特身份，他们深知趋炎附势的重要性，而趋炎附势是他们能够在宫中活下来的本事。这里最趋炎附势的是太监陈洪，他是时刻都想坐上掌印的位置的，所以他时时刻刻在想着能够让吕芳下台，而黄锦却是一名忠厚老实的太监，他对吕芳可谓忠心耿耿。这两个大集团我已经陈述清楚了，还有一个集团就是皇上的儿子裕王，裕王是将来要接替嘉靖位置的人，虽然现在说话没有人会听，但是大家都会对他客客气气。而裕王最需要制衡的对象就是严势力，裕王手下有户部侍郎高拱，兵部侍郎张居正。严嵩手下有他儿子吏部工部侍郎严世蕃。另外，还有一些比较重要的人物像太监杨金水，商人沈一石等我就不一一说了，只要知道杨金水是给皇上办事就行了。在明确了人物关系以后，我们就可以按照剧情的发展来抽丝拔茧的分析剧中人物的动机了。&lt;/p&gt;

&lt;p&gt;　　所有的一切都是由于国库亏空，皇帝开启“改稻为桑”的国策开始。大致的剧情就是国策已经由内阁商讨出来以后，下发到浙江去实行。但是，老百姓本来就背着苛监杂税的重担还要谋生计，这朝廷说的政策要老百姓说改就改，那么粮食也没产出自己又产不出桑，只能抗议不干活。朝廷的政策执行不下去，贪官污吏就使尽各种伤天害理的办法来让老百姓卖田，让大户收田。然而，大户压价买，老百姓不肯卖。事情就僵住了。这一来浙江的两位贪官何茂才与郑必昌在严的势力支持下毁坝淹田，后又被胡宗宪分流救民，制止了所有的郡县被淹，只淹了淳安建德两县。最终，引出了本剧主角&lt;a href=&quot;http://baike.baidu.com/view/7575.htm&quot;&gt;海瑞&lt;/a&gt;与海瑞将来的生死之交&lt;a href=&quot;http://baike.baidu.com/link?url=iRK8Y11ou8SvuzdImCsh_9lrijr4YLSmsveWVXr-C9Q4YfxIvhDGDh75Vg1hctstDRrUpqIl4eRtNgyzSp5oriFe9UjaFHALep2g72ZGMkgEmVv6ipBjjAWXmKUh24pW&quot;&gt;王用汲&lt;/a&gt;上任淳安建德两县的知县。而后，随着海瑞不要命的对刚腐败之风，终于刚死了皇上。&lt;/p&gt;

&lt;p&gt;　　每次看到海瑞直面挑战腐败风气的时候，我都会为他叫好。一是佩服这种刚正不阿的人，二是佩服海瑞的知识，三是看到一个渺小的力量在对抗着强大的不正之风还能取得上风，随着一声巨吼把他们打的体无完肤。海瑞刚出来的时候是刚何茂才郑必昌2人，这两个人确实罪大滔天，被海瑞这么刚确实看的过瘾，让我连连叫好。慢慢的，随着此2人被绳之以法后，新上任的杭州巡抚赵贞吉，因为东海战事急需用钱购粮，而国库亏空发不出军粮，赵贞吉只能用一些不正规的手段解决，然而海瑞知道以后仍是站在百姓的角度出发制止赵贞吉。当看到这里的时候有个疑问徘徊在我的脑中，海瑞这样做到底是对不对呢？我想万事皆有正反两个方面，不能同一而论。那么评判海瑞对与不对就要分事，海瑞的刚正不阿在什么事情上是对的，在什么事情上是不对的。在贪官污吏贪污枉法之事上那么海瑞是真正的替百姓做主，这事儿做的对。但在国有外乱内无良策之下，赵贞吉做出出格之事海瑞还照刚不误，那就有些不食人间烟火了。然而海瑞是站在道德的最高点上做事，君臣确实无话可说。可是，由于当时的时局动荡，大家都在伺机而攀附权贵的情况下，海瑞的存在确实与别人格格不入。让我们试想如果海瑞是你的朋友，当你做了有违道德的事情的话，他会按照公认的道德标准批的你体无完肤，我想尽管他是你再要好的朋友，以后做事你都会避而远之了吧。中国的社会自古就是讲究人脉的社会，古往今来哪个权贵之人不希望自己人能够占据更多的话语权的位置？这说明人都是需要团体的，就连现在的世界各国也在不断拉拢能够帮助自己的国家吧。俗话说朋友多了好办事，但是如果你身边有个海瑞，他随时都有可能站在道德的制高点上去评判你，那这岂不是自己给自己身边留下了一个定时炸弹？&lt;/p&gt;

&lt;p&gt;　　六心居酱菜铺每年都会通过严嵩之手献给皇帝20坛酱菜。可是在严党倒台之际，平时多少人都梦寐以求想找严嵩题块字匾，但是现在严嵩主动给六心居题匾，六心居都不敢要了。这是为什么呢？因为大家都知道严党倒台以后朝廷会清算严党，在这个时候大家躲还来不及呢，更别说要让严嵩题块匾了。可是，严嵩偏偏题了，而后皇上在这个心上画了一撇哼了六必居。自此，六必居的生意一下子变的门可罗雀了。海瑞来京上任的时候路过了六必居，他明知道六必居是皇上在心上加了一撇，他还是最后给这匾做了六句话的解释。像这种事情不论在哪个朝代就连现如今，也不是一般人能够做的出来的吧。然而，海瑞就能够做得出来。可他为什么能够做得出来呢？皆因为他想为六必居伸冤。而后，当皇上知道了次事以后龙颜大怒，但是也拿他没什么办法，最后只得将海瑞写的这六句话让工匠们赶紧刻出匾来和六必居那三个字一同悬在门梁之上。皇上这么做可谓是聪明至极，其实皇上比谁都明白，之前是自己做错了，经海瑞那么一闹自己才发现原来给老百姓开的酱菜脯带来了多大的灾难，然而身为一国之君又不能公开给一名举人道歉，将这六句话刻成匾算是一个折中的办法。我想说的不是嘉靖要比海瑞聪明，而是嘉靖知道如何维护双方的关系。那天和别人聊天，聊到了道家法家和儒家。人家就告诉我很多管理的行家都有一种共识也是很多较为理想的管理层级定位：基层干部做“法家”，中层干部做“儒家”，高层领导做“道家”。法家主张“法制”，儒家主张“德志”而道家主张“无为而治”，这也是嘉靖皇帝一直提倡的口号：无为而治。我们可以看看现如今的整个管理阶层其实也蕴藏着这个理论。最小的官是用制度来管理，中层领导则是主张用以德感人，而最高的领导都是具有超前的理念，正确的决策。&lt;a href=&quot;http://cache.baiducontent.com/c?m=9f65cb4a8c8507ed4fece763105392230e54f7366596964c68d4e419ce3b46120720b8ea79750d5c8896212d46f81c1bb9ac68292a497be4c699d21981eeda7268db7b6a23409b4717d112abdc46529b66cf04fdea44a7ecff25e3a9c5a2dd4323bb44737a97f0fa4d7011dd1cfa034192b1ef48025f61ad9c3a72885e6059ee3436b6&amp;amp;p=882a9644d0d017fc57ef8a3b424d8d&amp;amp;newp=cb7fd502a4904ead13bd9b7d0c108c231610db2151d6d5156b82c825d7331b001c3bbfb423231b07d1c27e6405af4d56ecf03d77370025a3dda5c91d9fb4c57479c3&amp;amp;user=baidu&amp;amp;fm=sc&amp;amp;query=%B5%C0%BC%D2+%B7%A8%BC%D2+%C8%E5%BC%D2&amp;amp;qid=e3ef385a00035702&amp;amp;p1=9&quot;&gt;查看更多&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;　　像海瑞这种个性的人在社会上当然会有，但确实凤毛菱角。正因为他的刚正不阿对民那才叫青天大老爷，对上级可谓心头大患。如果，社会上像海瑞这样的人到处都是，不知道这样的社会会是什么模样？古话说每个人心中都是圣贤的，也就是说每个人心底都是有道德标准的，只是有高有低而已。当高标准道德碰见低标准道德时，不能说低标准道德就为缺德，而低标准道德也不会把高标准道德作为楷模。那世间会有一种尺子能给出道德的标准吗？我想是有的，因为我们知道百善孝为先。这个孝字就是高标准道德和低标准道德都共有的。因为他们俩是有交集的，所以他们之间肯定会有标准。我们不妨考虑自己所站的角度来衡量他们，这也是我能想到的第一种衡量标准。也就是说你站的越高，所受到的道德标准约束就约多。你站的越低，所受到的道德标准就约少。让一个捡破烂的和一个公务员交谈，你会发现他们所处的层次是不一样的，自然说出来的话就不一样，正因为他们所处的角度不一样，才使他们能够说出不一样的话来。所以，海瑞说到底还是一个举人，虽有真才实学，但是不懂得韬光养晦之道，正因为他所站的角度都是从民出发，所以天生站的低，看的就近，只是把百姓的需求当成头等大事，而没有顾全国家之道。嘉靖是皇帝自然站的高看得远，他站的角度自然是以国家出发，所以对事物看的更加透彻。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="thinking" /><category term="思考,观后感" /><summary type="html">有了门，我们可以出去;有了窗，我们可以不必出去。 –钱钟书</summary></entry><entry><title type="html">在centos下升级php的经历</title><link href="http://naffan.cn/tech/2017/02/24/1.html" rel="alternate" type="text/html" title="在centos下升级php的经历" /><published>2017-02-24T00:00:00+08:00</published><updated>2017-02-24T00:00:00+08:00</updated><id>http://naffan.cn/tech/2017/02/24/1</id><content type="html" xml:base="http://naffan.cn/tech/2017/02/24/1.html">&lt;p&gt;公司的服务器很多很杂，php的版本也不尽相同。今天，遇到本来项目是php5.6的。但是，上到测试机上就报错，说是中括号作为数组定义不能够解析。后来查了一下发现这个是php版本的问题，紧接着赶紧到服务器上看了一下，果然是服务器上的php版本是php5.3.3的。那么，接下来就是准备升级服务器上的php了。由于这个服务器之前人家是用yum安装的，我通过&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yum list installed | grep php
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看到了服务器上的php版本。于是，将所有查到有关于php’的全部删除了。紧接着就要下php56的安装包了。通过&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yum install php56
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;发现，yum找不到php56的安装包。这是yum源的问题，我们需要将新源添加给yum。
首先，我需要确定centos的版本。&lt;a href=&quot;http://www.cnblogs.com/YangJieCheng/p/5907166.html&quot;&gt;阅读更多&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cat /etc/issue
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;发现我们的服务器是centos6的。&lt;a href=&quot;http://blog.csdn.net/ysydao/article/details/51388397&quot;&gt;阅读更多&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Centos 5.x
rpm -Uvh http://mirror.webtatic.com/yum/el5/latest.rpm
CentOs 6.x
rpm -Uvh http://mirror.webtatic.com/yum/el6/latest.rpm
CentOs 7.X
rpm -Uvh https://mirror.webtatic.com/yum/el7/epel-release.rpm
rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;将源添加成功以后，开始安装php56。安装成功。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yum install php56
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;重启php-fpm后，发现php的版本仍然停留在php5.3.3上。这是因为php-fpm是管理php进程的容器。它相当于承载php的虚拟机一样。我们需要重启它才能够重新加载php的各项配置。但是目前我的php版本是5.6，php-fpm版本是5.3.3。所以，重启起来照样php的版本还是5.3.3 。&lt;a href=&quot;http://www.cnblogs.com/blackpuppy/p/upgrade_php_from_54_to_55_on_centos.html&quot;&gt;阅读更多&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yum install php56w-fpm 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这样，就完成了php-fpm的安装。重启php-fpm后，php版本升级到php5.6。&lt;a href=&quot;http://www.cnblogs.com/zdz8207/p/3765579.html&quot;&gt;阅读更多&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;service php-fpm restart
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;后发现php缺少mysqli的扩展。而php5.6的扩展又不像以前那样只把extension前面的分号去除就行。现在都需要自己安装了。但是在安装的过程中出现冲突情况：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/02/24/58afbaceed5c6.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们可以采用&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yum install php56w-mysql
&lt;/code&gt;&lt;/pre&gt;</content><author><name>张一帆</name></author><category term="tech" /><category term="linux,centos,php" /><summary type="html">公司的服务器很多很杂，php的版本也不尽相同。今天，遇到本来项目是php5.6的。但是，上到测试机上就报错，说是中括号作为数组定义不能够解析。后来查了一下发现这个是php版本的问题，紧接着赶紧到服务器上看了一下，果然是服务器上的php版本是php5.3.3的。那么，接下来就是准备升级服务器上的php了。由于这个服务器之前人家是用yum安装的，我通过</summary></entry><entry><title type="html">开通这个专栏的意义</title><link href="http://naffan.cn/thinking/2017/02/08/01.html" rel="alternate" type="text/html" title="开通这个专栏的意义" /><published>2017-02-08T00:00:00+08:00</published><updated>2017-02-08T00:00:00+08:00</updated><id>http://naffan.cn/thinking/2017/02/08/01</id><content type="html" xml:base="http://naffan.cn/thinking/2017/02/08/01.html">&lt;p&gt;　　近些年一直在想着多读点能够提升自己思维的书籍并且自己也做了一些尝试。因为，我觉得人越来越大思维就不能对所有的事凭借着还是稚嫩的逻辑去理解，社会上的事情往往不那么简单，再简单的事情背后都会有着为什么会这样发生的各种原因。最近，也是遇到了一些事情让自己对思考的需求最大化。所以，我就开通了这个栏目。希望借着在自己生活中的点点滴滴都能够引起我足够的重视，再通过自己的思考得出真正经过加工的结果。&lt;/p&gt;

&lt;p&gt;　　开通这个专栏的第一件事情就是要为它取个名字，取名字这种事也很让人伤脑筋的，各种关于思考的词汇仿佛怕被你找到一样，刚刚还在你眼前晃荡，这一下子就消失的无影无踪，任凭你怎么去找它，它就是不让你找到。后来，终于找到了沈思默想这个词组，沈思默想意既静静地深思，我想思考是需要静下心来慢慢琢磨出所以然，所以此词最好。并且沈思通深思，对我来说有特别的纪念意义。最终，我将这个词组当做了这个栏目的栏目名称。&lt;/p&gt;

&lt;p&gt;　　有的时候在你想到一些东西的时候想要立刻将其记录下来，然而当你提起笔来的时候却发现之前的想法早已飘散了。这其实是一种问题，这说明自己的思维不具有连贯性。这样的事情发生的越多就越说明这种能力越弱，对于那些编辑或者文工的公众来说这个能力就相当的强，所以他们能言善辩，能够说出更加有说服力的句子来。那么，像我们有这方面弱势的人就需要勤加练习。只有这样，我们才能够让自己的思维更加连贯，让自己的思考更加深刻。这也就是我想开通这个专栏的真正意义所在。&lt;/p&gt;

&lt;p&gt;　　望自己能够在今后的生活中不断的填充起这个栏目的内容，可以写出一些让大家都愿意读且能够激发读者们自己思考的文章来。虽然知道这件事情很难，但是难也要坚持住，前期会是痛苦的，但是习惯了以后就会变得越加轻松且游刃有余起来，给自己的收获也会是大大的。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="thinking" /><category term="思考" /><summary type="html">　　近些年一直在想着多读点能够提升自己思维的书籍并且自己也做了一些尝试。因为，我觉得人越来越大思维就不能对所有的事凭借着还是稚嫩的逻辑去理解，社会上的事情往往不那么简单，再简单的事情背后都会有着为什么会这样发生的各种原因。最近，也是遇到了一些事情让自己对思考的需求最大化。所以，我就开通了这个栏目。希望借着在自己生活中的点点滴滴都能够引起我足够的重视，再通过自己的思考得出真正经过加工的结果。</summary></entry><entry><title type="html">通过nodejs搭建客服系统还有闲谈</title><link href="http://naffan.cn/tech/2017/01/25/1.html" rel="alternate" type="text/html" title="通过nodejs搭建客服系统还有闲谈" /><published>2017-01-25T00:00:00+08:00</published><updated>2017-01-25T00:00:00+08:00</updated><id>http://naffan.cn/tech/2017/01/25/1</id><content type="html" xml:base="http://naffan.cn/tech/2017/01/25/1.html">&lt;blockquote&gt;
  &lt;p&gt;本文所述的游云客服系统，网址为&lt;a href=&quot;http://cs.17youyun.com&quot;&gt;cs.17youyun.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;　　从12月开始，公司要我们为宝库搭建一套客服系统。本来是做通讯的我们，因为自身业务单一，技术经验少，推广比不过竞品，再加上本身通讯行业的技术壁垒较高，导致我们的产品战略从年初计划的对外产品慢慢转向了对内的支持服务。后来，公司专一重点项目后，我们也即将成为一个转型部门。在这一节骨眼上我们渴望获得一次机会进行证明，同时也期望能够在2016年底给我们自己做一个收官。经过看起来不是很顺利的沟通后，宝库同意将对客服的需求交托于我们部门做，所以这也是我们能够称的上是救命稻草的一线希望。&lt;/p&gt;

&lt;p&gt;　　在年中我们在运营着自己的sdk，这个sdk是给开发人员对接移动端push需求而开发的。除了push功能以外，我们也开发着voip以及聊天室等项目。&lt;a href=&quot;www.17youyun.com&quot;&gt;游云网站&lt;/a&gt;是我们呈现给开发者的接入网站，开发者在接入的时候可以在这个网站中看到各种定制化的推送服务。游云网站是由我一人开发起来的，虽然与竞品网站比起来有些小巫见大巫，但是也是充满着对通讯行业的一些窥视。后因工作需要，我们需要给游云接入一个web版的demo，望借以此呈现个开发者用户一个更加直观的体验，所以后来就有了&lt;a href=&quot;web.17youyun.com&quot;&gt;web游云&lt;/a&gt;这个功能，这个网站是利用cometd技术做的，因为公司前身是当年在新浪红极一时的项目-微米。到现在我还记得，当年在新浪的时候上级压下来的任务就是每天都要登录微米发信息，而且那年年会上还专门有个项目奖颁发给了微米，可谁又能够想到微米团队内部出现分歧，技术团队叛变，造成彭极其尴尬，最终死的很惨。话说回来，自从工作以来已经两次接触了cometd这个玩意了。记得第一次接触这玩意的时候自己还是个初出茅庐的小伙子，那个时候正好要对&lt;a href=&quot;kan.sina.com&quot;&gt;看游戏&lt;/a&gt;进行大改版。后来，研究了半天最终也没搞清楚个大概，只能沿着老人们的代码一点一点调试，现在回忆起来那个时候的调试方法极其笨拙，再加上自己对项目的理解很差，所以虽然顺利改完版了，但是对自己的成长真的没有太多，只能说自己知道这个是什么玩意了。现在时间已经过去了4年了，再来看cometd多少还是有些抵触的。可是，项目压下来自己也没有办法，而且这次后端的网关还是用java写的，这让我又整了套java环境，两套环境在同一台电脑上跑，真是太费劲了。最终，还是搭起来了这个网站，也能够实现一些基本的简单功能了，可是后来由于本部门的java团队忙于应付宝库的需求，最终不能提供给我及时的响应，所以也就暂时搁浅了。&lt;/p&gt;

&lt;p&gt;　　随着公司大战略的转移，慢慢的我们通讯部门就慢慢的变的越来越不重要了。再加上一年来项目给外面项目对接的缓慢并且总是不能正常使用让决策层变得越发的艰难了。最终，公司要求我们部门从产品线转化为支持性部门，将功能给上海总公司提供支持。也就是说领导们不期望这个项目可以去赚钱了，但是又不干做了那么久了，那么就公司内部的产品谁需要通信功能，那么我们部门就跟他们进行对接。可想而知，这样做的时间越长项目的立锥之地就越少。由于我是部门的一个开发工程师，抱着不在其位不谋其政的态度静观其变。后来，大概是16年的11月份，部门争取到了宝库的客服需求。我们就做起客服系统来了。&lt;/p&gt;

&lt;p&gt;　　起先，我们人员安排上比较薄弱。几个java负责服务端，想要将原来cometd转变成websocket。另外，我们部门的C老大也一直在帮助java们整理开发服务功能，所以必定会偏向java。而作为客服是需要一套前端框架的，这个框架是需要js的，而我从事于php，对js当然要比他们多，索性就安排我来开发js了。&lt;/p&gt;

&lt;p&gt;　　起初，在选择方案上我就非常头疼。js的页面级应用对我来说并不是很难，我一个人完全应付的来。但是，对已一套客服系统来说，我开始是不知所措的。于是，我就一边去研究websocket功能的同时一边去github上找客服功能的源代码。在github上更多的是聊天室功能，我费了半天劲将github上的一个个开源程序clone到本机并运行起来却发现功能要不是很简单，要不就是从需求上就不能满足。这两我很头疼，但是最终我还是找到了一个带着聊天框且支持多聊天窗口的&lt;a href=&quot;https://github.com/xunull/socketio-chat&quot;&gt;开源程序&lt;/a&gt;。搭建起来是这个样子的：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/01/25/58885a9ec28b4.png&quot; alt=&quot;chatPi&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　通过阅读作者的代码发现这个程序是通过redis来进行聊天内容的同步的。也就是redis为每一个接入的用户增加一个id为键的堆栈，内容就是用户的聊天内容，说话的对象以及时间。页面渲染的数据是通过nodejs服务端的逻辑发送到websocket上，再由页面的js渲染出来。这样其实已经满足了我的基本功能了，只是实现方式不太一样。我需要做的就是将redis的功能去除，而发送消息的地方改成向nodejs中的socket.io发送即可。至于后续逻辑就在nodejs服务端中去补充即可。但是，后来java也直接找到了一个开源的websocket框架并且搭起来了，与其让我一个人写前端+后端还不如我把后端撇给java做，毕竟java是两个人负责。于是，我这里只需要做前端的html+js即可。虽然我只负责了html+js，但是我还是留着nodejs服务端的功能，运行这个项目还是需要启动nodejs服务的，原因当然是为了今后的数据我自己也可以处理，这样更加安全且方便。&lt;/p&gt;

&lt;p&gt;　　慢慢地，产品设计的需求也一步一步的满足。比如，上传图片、获取历史消息等。然而，页面还停留在这种乱乱的界面呢。为了达到更进一步，我利用bootstrap重新做了一套页面，套上以后确实感觉很nice。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/01/25/58885a9e24473.png&quot; alt=&quot;chatafte&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　好了，基础的页面也有了，剩下的就是完成各种需求了。websocket有几种基础行为：onopen，onclose，onmessage，onerror。当websocket连接成功的时候会进入onopen，断开进入onclose，有消息发送过来进入onmessage。具体收到消息是什么消息以及之后的逻辑是什么都需要在onmessage中完成。我和java约定数据格式大概是这样子的:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-json&quot;&gt;{
    &quot;type&quot;: &quot;action&quot;, //可触发事件的，param中参数原样返回
    &quot;content&quot;: &quot;是什么材质的？&quot;,
    &quot;params&quot;: {
        &quot;to&quot;: &quot;robot&quot;
        &quot;id&quot;: 1,
        &quot;groupId&quot;: 1,
        &quot;prio&quot;: 1, // 排序 priority
        &quot;level&quot;: 1,
        &quot;createTime&quot;: 1480931117000
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;　　我们可以通过type来区分服务端发过来的是何种消息，也就可以实现比如聊天消息，通知消息，心跳消息等的区分了。至于onmessage中是怎么写完全可以凭自己公司的需求去写了。&lt;/p&gt;

&lt;script async=&quot;&quot; src=&quot;//jsfiddle.net/naffan/1jtdf5hk/embed/&quot;&gt;&lt;/script&gt;

&lt;p&gt;　　onmessage中我是通过obj（是java传给我的数据）中的type值（需要json解析出数据）来区分消息的类型，比如用户进入（entercs）、用户推出（leavecs）、消息（message，其中具体是图片消息还是文字消息之类的可以通过content中的type字段来区分）、剔除用户（kill_user，这个就是我们产品要求的逻辑了，也是个性化的消息类型了）等等。可以看到我在接收到message的时候调用了directive.receive(data)方法，这个方法最终的执行逻辑是这样的：&lt;/p&gt;

&lt;script async=&quot;&quot; src=&quot;//jsfiddle.net/naffan/w1sdx95m/embed/&quot;&gt;&lt;/script&gt;

&lt;p&gt;　　首先，响提示音。然后需要判断当前发送过来消息的人是不是我打开当前窗口的人，如果不是就需要将用户列表增加一条未读消息的提示数字，之后不论是否都将信息添加到发送人的窗口中。那什么叫做发送人的窗口呢？我们可以这样理解，每个发送人都要有个存储聊天内容的页面，因为你现在聊天中的用户时可以直接看到他的消息。然而，那些已经接入了但是又不是你当前聊天的对象的信息也需要记录下来的，当我们切换聊天窗口时我们是需要看到他之前留下的信息的。这个功能起初git上的开源程序没有考虑到，所以我需要增加这块功能。大体思想是这样的，我用html写一个div的聊天窗口框架出来，每当一个用户接入的时候，我都将这个div里面的内容clone给一个变量，然后再声明一个MAP（其实就是在内存中开辟一个空间用来做hash存储），用这个用户的id为键，clone的变量作为值保存在其中。这样我就能够随时通过map键的方法将用户聊天窗口存起来了，当用户有信息过来的时候我将这个变量取出来，再往html中的最底部的dom标签前增加信息内容，最后再存入map中。这样我们就可以实现页面级的切换窗口查看消息内容的需求。哦对，忘了说了，那怎么记录当前聊天的用户id呢？当然，是声明个全局的js变量喽，每次切换聊天的用户id时，就将这个id替换到这个变量中。除了这个当前聊天用户的id的变量以外，还需要两个全局变量：一个是用来存储我们登录的客服id的变量，一个是用来存储已经接入用户的id的变量，这个变量可以作为记录未读数，当你切换到这个用户聊天时将未读数清零。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/01/26/5889fac0d3001.png&quot; alt=&quot;QQ20170126-130958@2x&quot; /&gt;&lt;/p&gt;

&lt;p&gt;　　当用户接入进来的时候，页面上就应该有响应的动作，那就是用户列表中就会增加这个新接入用户的提示，就如同上图中的用户2，用户3所示。在js上我们可以采取用jquery来写的方法，比如在发现有用户接入时我们append到用户1的html下方。但是，这样比较麻烦，因为我们需要去专门写这个方法。就因为我觉得麻烦所以我想找一个能不能有个能够相对动态的方法呢？最终我找到angularJs。angularJS是一个能够进行双向绑定的js框架，只要你在js中声明了哪个html需要进行监听，angularJS就会自动的帮你完成双向绑定功能，也即是说他会自动的添加新用户接入的提示。下面这段代码就是将用户列表这一块的html作为angularJs的侦听对象，之后再绑定一个click的方法，用来更新js中变量记录的数值以及将用户对应的聊天框显示出来。&lt;/p&gt;

&lt;script async=&quot;&quot; src=&quot;//jsfiddle.net/naffan/w5bexygj/embed/&quot;&gt;&lt;/script&gt;

&lt;p&gt;　　在上面的代码中还有一些更新localstorage的代码，这块代码的用途我也需要说明一下啊。由于业务产品的需求，当用户退出时不会自动在客服系统中退出，只有客服人员能够关闭客户的接入（现在的客服产品，商家都是要求客服不能主动停止会话的，但是我们的产品说是因为我们的需求方的特殊需求，所以只能这样了）。那么问题来了，js是页面的语言，一旦刷新以前存在页面js中的信息皆会不复存在，那么我们如何存储曾经接入又没有被客服关闭的会话呢？因为html5出现以后，现在的浏览器也都支持了本地存储功能，也就是localstorage。localstorage是根据域名来保存的键值对，value只支持字符串。这正好可以帮我们实现数据的存储，于是我将用户的信息都通过key来存储到了这里。只是，在保存和查询的动作上需要进行json字符串的字符化和对象化。&lt;/p&gt;

&lt;p&gt;　　很多功能我们不光需要自己写，更多的可以去git上去搜索已经很有价值的插件。比如上传文件的组件，查看图片的缩略图的功能。我就是用的&lt;a href=&quot;https://github.com/jfeldstein/jQuery.AjaxFileUpload.js&quot;&gt;https://github.com/jfeldstein/jQuery.AjaxFileUpload.js&lt;/a&gt;用来做文件上传，&lt;a href=&quot;https://github.com/fengyuanchen/viewer&quot;&gt;viewer&lt;/a&gt;用来做图片的缩略图。后来，我们又添加了获取历史记录的功能，我们想要实现qq这样的当滚动条到达最顶部的时候会拉出历史记录并且滚动条还原到按照增加的记录长度的比例的位置。我也在git上找了一些这样的下拉触发事件的插件，但是没有满意的，于是我就自己写了这段代码。&lt;/p&gt;

&lt;script async=&quot;&quot; src=&quot;//jsfiddle.net/naffan/5xceoywu/embed/&quot;&gt;&lt;/script&gt;

&lt;p&gt;　　当然，我们的系统设计的还不是很好。随着代码越写越多，我越发的觉得当时设计的架构非常差，我要是想改一地方，有很多地方都会牵扯到，所以就不是改一个地方这么简单了。我现在需要的是提高自己的js能力，去学习js的框架知识，应该马上对这个系统进行代码重构。&lt;/p&gt;

&lt;p&gt;　　另外，我刚开始说过，我采用的是nodejs，但是服务端我并没有用。这就造成了一个问题，当我需要调用java接口的时候，由于java接口的域名和客服系统的域名不一样，这样就遇到了跨域问题。跨域是现在的浏览器都会禁止的操作，所以我需要java在出接口的时候，返回给我的json串外还需要帮我增加一个嵌套，如jsoncallback[‘java返回的json’]。这个设计是不好的，虽然能够暂时符合目前的需求，但是终归还是需要经过nodejs的服务层一趟的，因为安全，以为敏捷。&lt;/p&gt;

&lt;p&gt;　　最后，我还要说一下。我这个项目用到了2个方便开发和管理的工具。一个是pm2，一个是webpack。具体两个是干吗用的，我大概说一下。pm2是一个可视化的nodejs进程管理工具，他可以帮助你实时的更新应用服务，这就给你省去了每次更改nodejs代码时总需要频繁的重启node服务（–watch）。由于我们的项目是运行在线上的，所以环境也有几套。当我更改代码的时候我关心的是代码如何书写，并不关心环境。所以，我还需要动态的去区分代码所处的服务器环境，哪个是测试环境，哪个是生产环境。那么，我通过官网的手册，找到了pm2是可以通过参数来区分服务器环境的。我们只需要声明一个配置文件ecosystem.config.js。在这里面定义参数所对应的环境，那么在我们启动pm2的时候我们只需要将代表当前环境的参数输入即可，这些小工具能够帮助自己更加方便的进行开发以及维护。webpack是一个js代码整合器，它主要的功能就是通过js的互相引用，他可以只能的侦测到所用到的js并且可以将所有的js整合到一个文件中，便于开发者管理。&lt;/p&gt;</content><author><name>张一帆</name></author><category term="tech" /><category term="js,nodejs,websocket,angular,webpack,客服" /><summary type="html">本文所述的游云客服系统，网址为cs.17youyun.com</summary></entry></feed>
